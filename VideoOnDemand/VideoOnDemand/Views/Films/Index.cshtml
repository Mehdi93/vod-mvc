@model IEnumerable<VideoOnDemand.Models.Film>
@System.Web.Optimization.Scripts.Render("~/Scripts/Films")

@{
    ViewBag.Title = "Index";
    
    var films = Model.ToList();
    films.Reverse();
    
    int nbFilms = films.Count();
    int nbAffichage;
    int cpt = 0;

    if (nbFilms > 16)
    {
        nbAffichage = 16;
    }
    else
    {
        nbAffichage = nbFilms;
    }
}

<h2>Index</h2>

<div id="nouveauxFilms" class="col-md-2 well well-sm">
    <h4>Derniers films</h4>
    <table class="table table-striped">
        @for (var i = 0; i < 10; i++) //affichage des 10 derniers films
        {     
            if(i<nbFilms) //on affiche le tb complet seulement si il y'a au minimum 10 films
            {
                <tr>
                    <td>
                        @films.ElementAt(i).Name
                    </td>
                </tr>
            }
        }
    </table>
</div>
<div id="listeFilms" class="col-md-offset-1 col-md-9 well well-sm text-center">
    <h4>Liste des films</h4>
    @for (int i = 0; i < nbAffichage; i++) //on affiche 16 films par page (ou ce qu'on a)
    {
        <div class="col-md-3">
            <a class="detailFilm" href="@Url.Action("Details", "Films", new { id = films.ElementAt(i).Id })">
                @if (File.Exists(Server.MapPath("~/Content/Images/Jackets/" + films.ElementAt(i).Id + ".jpg"))) //on verifie que la jacket existe
                {
                    <img class="jacketFilm" src="@Url.Content("~/Content/Images/Jackets/" + films.ElementAt(i).Id + ".jpg")" style="width:130px; height:200px;" />
                }
                else //sinon on affiche la jacket d'absence
                {
                    <img class="jacketFilm" src="@Url.Content("~/Content/Images/Jackets/PasDeJacket.jpg")" style="width:130px; height:200px;" />
                }

            </a>
            <p class="nameFilm">@films.ElementAt(i).Name</p>
            <p class="sortieFilm">@films.ElementAt(i).Sortie.ToString("dd/MM/yyyy")</p>
            
        </div>
        cpt++;
    }
    
    <a id="precedentPage" class="scrollUp pull-left">Précédent</a>
    <a id="suivantPage" class="scrollUp pull-right">Suivant</a>
</div>
<script>
    $(document).ready(function () {
        var pageFilm = 0;
        $("#precedentPage").on("click", function () {
            if (pageFilm > 0) {

                pageFilm--;
                console.log(pageFilm);
            }
        });

        $("#suivantPage").on("click", function () {
            if (pageFilm <= 0) {

                pageFilm++;
                

            }
        });
    })
</script>